/**
 *
 * @package   theme_mb2nl
 * @copyright 2017 - 2020 Mariusz Boloz (mb2moodle.com)
 * @license   Commercial https://themeforest.net/licenses
 *
*/ jQuery(document).ready(function(t){var e=t("body").hasClass("sticky-nav1")||t("body").hasClass("sticky-nav4")?t("#main-navigation"):t("#master-header"),a=e.outerHeight(!0),o=function(){var e=function(e){var o=e.attr("data-url").includes("?")?"&":"?",s=e.attr("data-url")+o+"blogpage="+e.attr("data-page");t.ajax({type:"POST",url:s,beforeSend:function(){e.addClass("lock"),e.html(e.attr("data-strloading"))},error:function(t,e,a){console.log(t),console.log(e),console.log(a)},success:function(t){setTimeout(function(){a(t,e)},950)}})},a=function(e,a){var o=t(e).find(".blog-post");t(".theme-blog-container").append(o),a.attr("data-page",Number(a.attr("data-page"))+1),new LazyLoad,a.attr("data-page")<a.attr("data-pages")?(a.removeClass("lock"),a.html(a.attr("data-strload"))):a.hide()};return{loadMore:function(){t(document).on("click",".blog-more-post",function(){var a=t(this);if(a.hasClass("lock"))return null;e(a)})}}},s=function(){return{btnClass:function(e){var a=t(".theme-scrolltt");e.scrollTop()>500?a.addClass("active"):a.removeClass("active")},back:function(){t(document).on("click",".theme-scrolltt",function(e){t("html, body").stop().animate({scrollTop:0},t(this).attr("data-scrollspeed"))})}}},n=function(){return{tableHTML:function(){t("table").wrap('<div class="theme-table-wrap"></div>'),t(".generaltable, .forumheaderlist, table.userenrolment").addClass("table table-striped"),t("table.collection").addClass("table table-bordered"),t("table.preference-table").addClass("table table-bordered"),t("table.rolecap").addClass("table table-bordered"),t("#categoryquestions").addClass("table table-striped")},tableClass:function(){t(".theme-table-wrap").each(function(){t(this).find(">table").width()>t(this).width()?t(this).addClass("wider"):t(this).removeClass("wider")})}}},l=function(){return{fixedNav:function(){if(!e.length)return null;var o=t(window),s=t("body");if(s.hasClass("sticky-nav0")||s.hasClass("pagelayout-mb2builder_form")||s.hasClass("pagelayout-mb2builder")||s.hasClass("pagelayout-maintenance"))return null;var n=t(".sticky-replace-el");o.scrollTop()>150?(n.css("height",a),e.addClass("sticky-el")):(e.removeClass("sticky-el"),n.css("height",0)),o.scrollTop()>250?e.addClass("sticky-el-jump"):e.removeClass("sticky-el-jump")},scrollLink:function(){t(document).on("click",".main-menu a",function(e){var a=t(this).attr("href"),o=a.split(""),s=0;if(t("body").hasClass("sticky-nav")&&(s=46),"#"===o[0]&&o.length>1){if(!t(a).length)return;t("html, body").stop().animate({scrollTop:t(a).offset().top-s},600),e.preventDefault()}})}}},r=function(){var e=function(){var e=t(".sliding-panel");e.find("btn"),e.css({"margin-top":Math.ceil(-((e.height()+1)*1))})},a=function(){var a=t(".sliding-panel");a.hasClass("closed")&&(e(),a.stop().animate({"margin-top":0},350),a.removeClass("closed"),a.addClass("open"))},o=function(){var e=t(".sliding-panel");e.hasClass("open")&&(e.stop().animate({"margin-top":Math.ceil(-((t(".sliding-panel").height()+1)*1))},350),e.removeClass("open"),e.addClass("closed"),t(".header-tools-jslink").removeClass("active"))},s=function(){var a=t(window).width();t(window).on("resize",function(){a!=t(window).width()&&(o(),e()),a=null})};return{username:function(){var e=t(".theme-loginform").find(".usertext"),a=t(".theme-loginform").find(".welcome_userpicture").parent();a.append(e),a.click(function(t){t.preventDefault()})},action:function(){t(".header-tools-jslink").click(function(e){e.preventDefault(),t(this).hasClass("tool-links")?(t(".theme-loginform").hide(),t(".theme-searchform").hide(),t(".theme-links").show(),t(".tool-search").removeClass("active"),t(".tool-login").removeClass("active")):t(this).hasClass("tool-login")?(t(".theme-loginform").show(),t(".theme-searchform").hide(),t(".theme-links").hide(),t(".tool-links").removeClass("active"),t(".tool-search").removeClass("active")):(t(".theme-loginform").hide(),t(".theme-searchform").show(),t(".theme-links").hide(),t(".tool-links").removeClass("active"),t(".tool-login").removeClass("active")),a();var s=t(".sliding-panel");s.hasClass("open")&&t(this).hasClass("active")&&o(),s.hasClass("open")&&t(this).addClass("active")})},marginTop:e,panelResize:s}},c=function(){return{manegeBtn:function(){var e=t(".panel-link");e.length&&(t(window).scrollTop()>e.offset().top+e.outerHeight(!0)?t("body").addClass("panellinkpass"):t("body").removeClass("panellinkpass"))},courseNav:function(){t('label[for="jump-to-activity"]').closest(".m-t-2").addClass("activity-nav")},noTitle:function(){t(".sectionname, .section-title").each(function(){var e=t(this).find(">span>a, >a").text();t("body").hasClass("editing")||" "!==e||t(this).hide()})},panelList:function(){t(".boxlist>li").each(function(){t(this).find(">ul").length&&(t(this).find(">a").append('<span class="boxlist-toggle"></span>'),t(this).find(">span").append('<span class="boxlist-toggle"></span>'))}),t(document).on("click",".boxlist-toggle",function(e){e.preventDefault(),t(this).toggleClass("active"),t(this).parent().siblings("ul").slideToggle(250)})}}},d=function(){var e=function(e){var a="",o=[];for(i=0;i<e.length;i++){var s=e[i].split(";"),n=t("#theme-bookmarks-form").data("rooturl"),l=t("#theme-bookmarks-form").data("pageurl"),r=t("#theme-bookmarks-form").data("pagetitle"),c=t("#theme-bookmarks-form").data("bookmarkthispage"),d=t("#theme-bookmarks-form").data("unbookmarkthispage");s[0]&&(a+='<li class="level-2" data-url="'+s[0]+'">',a+='<a class="bookmark-link mb2mm-action" href="'+n+s[0]+'"><span class="mb2mm-label">'+s[1]+"</span></a>",a+='<div class="theme-bookmarks-action">',a+='<button type="button" class="theme-bookmarks-form bookmark-edit themereset" data-url="'+s[0]+'" data-mb2bktitle="'+s[1]+'" data-toggle="modal" data-target="#theme-bookmarks-modal"><i class="fa fa-pencil"></i></button>',a+='<button type="button" class="theme-bookmarks-form bookmark-delete themereset" data-url="'+s[0]+'" data-mb2bktitle="'+s[1]+'"><i class="fa fa-times"></i></button>',a+="</div>",a+="</li>",o[i]=s[0])}var m=t.inArray(l,o),h="",u=' data-toggle="modal" data-target="#theme-bookmarks-modal"',f=c;return m>-1&&(h=" bookmark-delete",f=d,u=""),a+='<li class="theme-bookmarks-add">',a+='<button type="button" class="theme-bookmarks-form'+h+' themereset mb2mm-action" data-url="'+l+'" data-mb2bktitle="'+r+'"'+u+">",a+='<span class="mb2mm-label">',a+=f,a+="</span>",a+="</button>",a+="</li>"};return{save:function(){t(document).on("click",".theme-bookmarks-save",function(e){t("#theme-bookmarks-form").submit(),e.preventDefault()})},buildForm:function(){t(document).on("click",".theme-bookmarks-form",function(e){e.preventDefault(),t("#mb2bkurl").val(t(this).data("url")),t("#mb2bktitle").val(t(this).data("mb2bktitle"));var a=t('li[data-url="'+t(this).data("url")+'"]');t(this).hasClass("bookmark-delete")?(t("#bkupdate").val(0),t("#bkdelete").val(1),t("#theme-bookmarks-form").submit()):t(this).hasClass("bookmark-edit")?(t("#bkdelete").val(0),t("#bkupdate").val(1)):a.length>0?(t("#bkdelete").val(0),t("#bkupdate").val(1),t("#mb2bktitle").val(a.find(">a").html())):(t("#bkdelete").val(0),t("#bkupdate").val(0))})},submitForm:function(){t(document).on("submit","#theme-bookmarks-form",function(a){a.preventDefault();var o=t(this),s=o.find("#mb2bkcreateurl").val();t.ajax({type:"GET",url:s,data:o.serialize(),beforeSend:function(){t("#theme-bookmarks-modal").find(".loading-bg").fadeIn(250),t("#theme-bookmarks-modal").find(".theme-bookmarks-save").attr("disabled","disabled")},error:function(e,a,o){setTimeout(function(){t("#theme-bookmarks-modal").find(".loading-bg").fadeOut(250),t("#theme-bookmarks-modal").find(".theme-bookmarks-save").removeAttr("disabled"),alert(e.responseText)},800)},success:function(a){if(t.isArray(a)){var o=e(a);t("ul.theme-bookmarks").html(o)}else alert(a);setTimeout(function(){t("#theme-bookmarks-modal").find(".loading-bg").fadeOut(250),t("#theme-bookmarks-modal").find(".theme-bookmarks-save").removeAttr("disabled")},800)}})})}}},m=function(){return{toggleTextInit:function(){t(".toggle-content-button").each(function(){var e=t(this),a=e.parent(),o=e.prev(),s=o.find(">div"),n=e.attr("data-height");s.outerHeight()>Math.ceil(2*n)?(a.addClass("toggle-content"),o.addClass("content")):(a.removeClass("toggle-content"),o.removeClass("content"))})},toggleText:function(){t(document).on("click",".toggle-content-button",function(){var e=t(this),a=e.parent(),o=e.attr("data-moretext"),s=e.attr("data-lesstext");a.hasClass("open")?(a.removeClass("open"),e.html(o)):(a.addClass("open"),e.html(s))})},targetLink:function(){t(".link-target").each(function(){t(this).click(function(e){t("html, body").stop().animate({scrollTop:t(t(this).attr("href")).offset().top},1200)})})}}},h=function(){return{showHide:function(){t(document).on("click","#pass_show",function(){var e=t(this).parent().find("input"),a=t(this).attr("data-show"),o=t(this).attr("data-hide");t(this).hasClass("istext")?(e.attr("type","password"),t(this).removeClass("istext"),t(this).text(a)):(e.attr("type","text"),t(this).addClass("istext"),t(this).text(o))})},action:function(){t(document).on("keyup","#login-password,#password",function(){""!==t(this).val()?t("#pass_show").addClass("filled"):t("#pass_show").removeClass("filled")})}}};({init:function(){l().scrollLink(),({closeNotice:function(){t(".mb2notices-item.canclose").each(function(){var e=t(this),a="mb2notices-item-"+e.data("itemid"),o={expires:e.data("cookieexpiry"),path:"/"},s=e.find(".mb2notices-item-close");"hide"!==Cookies.get(a)&&e.show(),s.click(function(t){t.preventDefault(),e.slideUp(250),Cookies.set(a,"hide",o)})})}}).closeNotice(),s().back(),({init:function(){t(".mb2tmpl-acc-title").each(function(){t(this).click(function(e){t(this).toggleClass("active"),t(this).parent().find("> div").slideToggle(150)})})}}).init(),n().tableHTML(),n().tableClass(),({init:function(){t(".embed-video-bg").each(function(){var e=t(this);e.on("click",function(a){var o=e.parent().find("iframe");o.attr("src",o.attr("src")+"&autoplay=1"),t(this).fadeOut(350),e.fadeOut(350),a.preventDefault()})})}}).init(),({alertClass:function(){t(".alert-error").addClass("alert-danger"),t(".box.notifyproblem").addClass("alert"),t(".box.notifyproblem").addClass("alert-danger"),t(".box.notifyproblem").removeClass("notifyproblem")}}).alertClass(),({activeClass:function(){t(".nav-tabs .nav-link").each(function(){t(this).hasClass("active")&&t(this).parent().addClass("active")})}}).activeClass(),({regionName:function(){t(".block-region").each(function(){var e='<span class="region-name">'+t(this).data("blockregion")+"</span>";t("body").hasClass("editing")&&t(this).append(e)})}}).regionName(),r().username(),r().action(),r().marginTop(),r().panelResize(),({scrollDir:function(){var e=0;t(window).scroll(function(){(st=t(this).scrollTop())<e?(t("body").removeClass("scroll-down"),t("body").addClass("scroll-up")):(t("body").removeClass("scroll-up"),t("body").addClass("scroll-down")),e=st})}}).scrollDir(),c().manegeBtn(),c().courseNav(),c().noTitle(),c().panelList(),({init:function(){t('input.mb2color, .mb2color input[type="text"]').each(function(){t(this).spectrum({showInput:!0,showButtons:!1,preferredFormat:"rgb",allowEmpty:!0,color:"",showAlpha:!0})})}}).init(),({init:function(){var e=t(".theme-iconnav").height();t(".theme-iconnav").css({"margin-top":Math.ceil(-(e/2*1))}),t(".theme-iconnav li").each(function(){var e=t(this).find(".link-replace"),a=t(this).find("span.text"),o=t("body").hasClass("dir-rtl");e.hover(function(){o?a.stop().animate({left:"100%"},300):a.stop().animate({right:"100%"},300)},function(){o?a.stop().animate({left:-500},150):a.stop().animate({right:-500},150)})})}}).init(),d().buildForm(),d().save(),d().submitForm(),({guestClass:function(){t("form#guestlogin").parent().addClass("guestlogin-form")}}).guestClass(),m().toggleText(),m().toggleTextInit(),m().targetLink(),({actionButton:function(){t('.course-enrolbtn[href="#page-content"]').each(function(){t(this).click(function(e){t("html, body").stop().animate({scrollTop:t("#page-content").offset().top},1200)})})}}).actionButton(),h().showHide(),h().action(),o().loadMore()}}).init(),setTimeout(function(){l().fixedNav()},10),t(window).on("scroll",function(){s().btnClass(t(this)),c().manegeBtn(),l().fixedNav()}),t(window).on("resize",function(){n().tableClass(),m().toggleTextInit()})}),function(t){t(window).on("load",function(){var e=t(".loading-scr");setTimeout(function(){e.fadeOut(150)},e.data("hideafter")),t("body").addClass("page-loaded")})}(jQuery);